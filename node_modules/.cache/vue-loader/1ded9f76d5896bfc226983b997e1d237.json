{"remainingRequest":"/home/nayara/Documentos/wiki-master/autoestudo/project-starter/vuetify-2-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nayara/Documentos/wiki-master/autoestudo/project-starter/vuetify-2-project/src/views/Cadastro.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nayara/Documentos/wiki-master/autoestudo/project-starter/vuetify-2-project/src/views/Cadastro.vue","mtime":1583773075990},{"path":"/home/nayara/Documentos/wiki-master/autoestudo/project-starter/vuetify-2-project/node_modules/vuetify-loader/lib/loader.js","mtime":1582206604000},{"path":"/home/nayara/Documentos/wiki-master/autoestudo/project-starter/vuetify-2-project/node_modules/cache-loader/dist/cjs.js","mtime":1582206604000},{"path":"/home/nayara/Documentos/wiki-master/autoestudo/project-starter/vuetify-2-project/node_modules/vue-loader/lib/index.js","mtime":1582206604000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcFN0YXRlIH0gZnJvbSAndnVleCcKaW1wb3J0IHsgUmVwb3NpdG9yeUZhY3RvcnkgfSBmcm9tICJAL3JlcG9zaXRvcmllcy9SZXBvc2l0b3J5RmFjdG9yeSIKY29uc3QgdXN1YXJpb1JlcG9zaXRvcnkgPSBSZXBvc2l0b3J5RmFjdG9yeS5nZXQoInVzdWFyaW8iKQoKZXhwb3J0IGRlZmF1bHQgewogICAgcHJvcHM6IFsidG8iLCAiaW52YWxpZFRva2VuIl0sCiAgICBkYXRhOiAoKSA9PiAoewogICAgICAgIHZhbGlkOiB0cnVlLAogICAgICAgIGNoZWNrYm94OiBmYWxzZSwKICAgICAgICBub21lOicnLAogICAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgICBlcnJvcjogJycsCiAgICAgICAgcmVxdWlyZWRSdWxlOiBbCiAgICAgICAgICAgIHYgPT4gISF2IHx8ICdDYW1wbyBvYnJpZ2F0w7NyaW8nCiAgICAgICAgXSwKICAgICAgICBlbWFpbDogJycsCiAgICAgICAgZW1haWxSdWxlczogWwogICAgICAgIHYgPT4gISF2IHx8ICdDYW1wbyBvYnJpZ2F0w7NyaW8nLAogICAgICAgIHYgPT4gLy4rQC4rLy50ZXN0KHYpIHx8ICdFLW1haWwgbsOjbyDDqSB2w6FsaWRvJywKICAgICAgICBdCiAgICB9KSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgaWYgKHRoaXMuaW52YWxpZFRva2VuKSB7CiAgICAgICAgICAgIHRoaXMuZXJyb3IgPSAnU3VhIHNlc3PDo28gZXhwaXJvdS4gRmHDp2EgbG9naW4gbm92YW1lbnRlJwogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgb25TdWJtaXQgKCkgewogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlCiAgICAgICAgICAgIGlmICh0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKSkgewogICAgICAgICAgICAgICAgdXN1YXJpb1JlcG9zaXRvcnkKICAgICAgICAgICAgICAgIC5jcmVhdGVVc2VyKHsKICAgICAgICAgICAgICAgICAgICBub21lOiB0aGlzLm5vbWUsCiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuZW1haWwsCiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQsCiAgICAgICAgICAgICAgICAgICAgaGFiaWxpdGFkbzogdGhpb3MuaGFiaWxpdGFkbwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhdXRoL2xvZ2luJywge2VtYWlsOiB0aGlzLmVtYWlsLCBwYXNzd29yZDogdGhpcy5wYXNzd29yZH0pCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy4kc3RvcmUuZ2V0dGVyc1snYXV0aC9pc0F1dGhlbnRpY2F0ZWQnXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9ICdVc3XDoXJpbyBuw6NvIGNhZGFzdHJhZG8nCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgfSwKICAgIGxvZ2luKCl7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbG9naW4nKQogICAgICAgIH0KICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIC4uLm1hcFN0YXRlKHsKICAgICAgICAgICAgdG9rZW46IHN0YXRlID0+IHN0YXRlLmF1dGgudG9rZW4KICAgICAgICB9KQogICAgfQp9Owo="},{"version":3,"sources":["Cadastro.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Cadastro.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <v-container fluid class=\"fill-height\">\n        <v-row align=\"center\" justify=\"center\">\n            <v-col cols=\"12\" sm=\"8\" md=\"4\" >\n                <v-card class=\"elevation-12\">\n                    <v-toolbar color=\"primary\" dark flat>\n                        <v-toolbar-title>Cadastro</v-toolbar-title>\n                    </v-toolbar>\n                    <v-form  @submit.prevent=\"onSubmit\" ref=\"form\"  lazy-validation v-model=\"valid\" >\n                        <v-card-text>\n                            <p class=\"error--text text-center\">{{error}}</p>\n                            <v-text-field label=\"Nome\" name=\"nome\" prepend-icon=\"person\" type=\"text\" v-model=\"nome\" required :rules=\"requiredRule\"/>\n                            <v-text-field v-model=\"email\"  prepend-icon=\"email\"  :rules=\"emailRules\" label=\"E-mail\" required> </v-text-field>\n                            <v-text-field id=\"password\" label=\"Password\" name=\"password\" prepend-icon=\"lock\" type=\"password\" v-model=\"password\" required :rules=\"requiredRule\"/>\n                            <v-checkbox\n                                v-model=\"checkbox\"\n                                value=\"habilitado\"\n                                label=\"Selecione para habilitar\"\n                                type=\"checkbox\"\n                                required\n                            ></v-checkbox>\n                        </v-card-text>\n                        <v-card-actions>\n                            <v-spacer />                            \n                            <v-btn color=\"secondary\" @click=\"login\" >Cancelar</v-btn>\n                            <v-btn color=\"primary\"  type=\"submit\" :loading=\"loading\" large>Cadastre-se</v-btn>\n                        </v-card-actions>\n                    </v-form>\n                </v-card>\n            </v-col>\n        </v-row>\n    </v-container>\n</template>\n\n<script>\n    import { mapGetters, mapState } from 'vuex'\n    import { RepositoryFactory } from \"@/repositories/RepositoryFactory\"\n    const usuarioRepository = RepositoryFactory.get(\"usuario\")\n\n    export default {\n        props: [\"to\", \"invalidToken\"],\n        data: () => ({\n            valid: true,\n            checkbox: false,\n            nome:'',\n            loading: false,\n            password: '',\n            error: '',\n            requiredRule: [\n                v => !!v || 'Campo obrigatório'\n            ],\n            email: '',\n            emailRules: [\n            v => !!v || 'Campo obrigatório',\n            v => /.+@.+/.test(v) || 'E-mail não é válido',\n            ]\n        }),\n        created() {\n            if (this.invalidToken) {\n                this.error = 'Sua sessão expirou. Faça login novamente'\n            }\n        },\n        methods: {\n            onSubmit () {\n                this.loading = true\n                if (this.$refs.form.validate()) {\n                    usuarioRepository\n                    .createUser({\n                        nome: this.nome,\n                        email: this.email,\n                        password: this.password,\n                        habilitado: thios.habilitado\n                    })\n                    this.$store.dispatch('auth/login', {email: this.email, password: this.password})\n                        \n                        .then(() => {\n                            if (this.$store.getters['auth/isAuthenticated']) {\n                                this.$router.push('/')\n                            } else {\n                                this.error = 'Usuário não cadastrado'\n                            }\n                        })\n                }\n                this.loading = false\n            },\n        login(){\n                this.$router.push('/login')\n            }\n        },\n        computed: {\n            ...mapState({\n                token: state => state.auth.token\n            })\n        }\n    };\n</script>\n\n<style scoped lang=\"css\">\n\n</style>\n"]}]}